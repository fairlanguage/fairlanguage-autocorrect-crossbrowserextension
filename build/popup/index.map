{"version":3,"sources":["../controller/storage.js","index.js"],"names":["StorageController","currentHost","window","location","hostname","Promise","resolve","reject","settings","chrome","storage","local","get","hosts","find","hostInStorage","name","Error","set","displayVersion","document","getElementById","textContent","manifest","version","display","getCurrentHostSettings","tabs","query","active","currentWindow","currentHostname","URL","url","getHostSettings","then","value","JSON","stringify","catch","error","addEventListener","resetAllHosts","displayActive","buttonActive","tab","forEach","host","index","enabled","sendMessage","id","command"],"mappings":"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","file":"index.map","sourceRoot":"..\\..\\src\\popup","sourcesContent":["export default class StorageController {\n\n  constructor() {\n    return 'I controll the storage.';\n  }\n\n  static getHostSettings(currentHost = window.location.hostname) {\n\n    return new Promise((resolve, reject) => {\n\n      let settings;\n\n      chrome.storage.local.get(['hosts'], (storage) => {\n\n        settings = storage.hosts.find(hostInStorage => hostInStorage.name === currentHost);\n\n        if (settings) {\n          resolve(settings);\n        }\n\n        reject(new Error('No custom host settings'));\n      \n      });\n\n    });\n\n  }\n\n  static resetAllHosts() {\n\n    return new Promise((resolve, reject) => {\n\n      chrome.storage.local.set({ hosts: [] }, () => {\n\n        resolve(true);\n\n      });\n\n      reject(new Error('No resetting hosts'));\n\n    });\n\n  }\n\n}\n","import * as manifest from '../../manifest.json';\n\nimport StorageController from '../controller/storage';\n\nconst displayVersion = document.getElementById('display-version');\ndisplayVersion.textContent = manifest.version;\n\nconst display = document.getElementById('display');\n\nconst getCurrentHostSettings = () => {\n\n  chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n\n    const currentHostname = new URL(tabs[0].url).hostname;\n\n    StorageController.getHostSettings(currentHostname)\n      .then((settings) => {\n        display.value = JSON.stringify(settings);\n      })\n      .catch((error) => {\n        display.value = (error);\n      });\n\n  });\n\n};\n\ngetCurrentHostSettings();\n\ndocument.getElementById('button-reset-hosts').addEventListener('click', () => {\n  StorageController.resetAllHosts();\n  getCurrentHostSettings();\n});\n\n\n\n\nvar displayActive = document.getElementById(\"active-status\")\nvar buttonActive = document.getElementById(\"active-button\")\n\n\n/*\n* activate/deactivate\n*/\n\nchrome.storage.local.get(['hosts'], (storage) => {\n\n  chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {\n    \n    var tab = tabs[0];\n\n    var currentHostname = new URL(tab.url).hostname\n\n    var hostInStorage = null;\n\n    storage.hosts.forEach( (host, index) => {\n\n      hostInStorage = host.name === currentHostname ? host : hostInStorage;\n  \n    });\n\n    //display.value = JSON.stringify(hostInStorage)\n\n    if(!hostInStorage){\n\n      displayActive.textContent = 'not set'\n\n      buttonActive.textContent = 'enable'\n  \n    }else{\n\n     displayActive.textContent = hostInStorage.enabled;\n\n      buttonActive.textContent = hostInStorage.enabled?'disable':'enable';\n    \n    }\n    \n  })\n\n})\n\nbuttonActive.addEventListener('click', function(){\n\n  chrome.storage.local.get(['hosts'], (storage) => {\n\n\n          chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {\n\n            var tab = tabs[0];\n        \n            var currentHostname = new URL(tab.url).hostname\n        \n            var hostInStorage = null;\n        \n            storage.hosts.forEach( (host, index) => {\n        \n              hostInStorage = host.name === currentHostname ? host : hostInStorage;\n          \n            });\n\n            if(!hostInStorage){\n\n              chrome.tabs.sendMessage(tab.id, {command:'activate'});\n\n        \n              displayActive.textContent = 'true'\n        \n              buttonActive.textContent = 'disable'\n          \n            }else{\n\n              if(hostInStorage.enabled){\n                chrome.tabs.sendMessage(tab.id, {command:'deactivate'});\n              }else{\n                chrome.tabs.sendMessage(tab.id, {command:'activate'});\n              }\n              \n              displayActive.textContent = !hostInStorage.enabled;\n              buttonActive.textContent = !hostInStorage.enabled?'disable':'enable';\n            \n            }\n            \n          })\n\n        })\n\n})"]}