{"version":3,"sources":["../../config.js","../controller/storage.js","index.js"],"names":["default","enabled","consent","active","toolbar","options","settingsString","hostString","host","dev","colors","primary","gradient","height","opacity","StorageController","Promise","resolve","reject","chrome","storage","local","get","settings","config","set","Error","mode","currentHost","window","location","hostname","console","log","hosts","name","find","hostInStorage","push","index","indexOf","captionSettings","document","getElementById","displaySettings","style","display","captionEnabled","statusEnabled","buttonEnabled","captionConsent","statusConsent","buttonConsent","captionHost","stringHost","displayHost","buttonHostEnable","buttonHostDisable","captionToolbar","statusToolbar","buttonToolbar","captionDev","statusHosts","buttonResetHosts","captionVersion","displayVersion","getSettings","then","value","JSON","stringify","textContent","catch","error","getCurrentHostSettings","tabs","query","currentWindow","currentHostname","URL","url","getHostSettings","getAllHosts","getHosts","length","addEventListener","sendMessage","id","command","runtime","onMessage","addListener","undefined","_settings","resetAllHosts","manifest","version"],"mappings":"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","file":"index.map","sourceRoot":"../../src/popup","sourcesContent":["export default {\n  default: {\n    enabled: true,\n    consent: true,\n    active: null,\n    toolbar: true,\n  },\n  options: {\n    settingsString: false,\n    hostString: false,\n    enabled: false,\n    consent: false,\n    host: true,\n    toolbar: false,\n    dev: true,\n  },\n  colors: {\n    primary: ['#40B3FF', '#6652FF', '#F022EB', '#EBEBFF'],\n    gradient: 'linear-gradient(to bottom, #4a9fe0 0%,#e102ff 100%)',\n  },\n  toolbar: {\n    height: '150px',\n    opacity: 1,\n  },\n};\n","import config from \"../../config\";\n\nexport default class StorageController {\n\n  constructor() {\n    return 'I controll the storage.';\n  }\n\n  static getSettings() {\n\n    return new Promise((resolve, reject) => {\n\n      chrome.storage.local.get(['settings'], (storage) => {\n\n        if (storage.settings) {\n          resolve(storage.settings);\n        } else {\n          const settings = {\n            enabled: config.default.enabled,\n            consent: config.default.consent,\n            toolbar: config.default.toolbar,\n          };\n    \n          chrome.storage.local.set({ settings }, () => {\n            resolve(settings);\n          });\n        }\n\n        reject(new Error('Reading settings from local storage'));\n      \n      });\n\n    });\n\n  }\n\n  static setEnabled(mode = 'toggle') {\n\n    return new Promise((resolve, reject) => {\n\n      chrome.storage.local.get(['settings'], (storage) => {\n\n        const settings = storage.settings;\n\n        //console.log(settings)\n\n        settings.enabled = mode === 'toggle' ? !settings.enabled : mode;\n\n        //console.log(settings)\n\n        chrome.storage.local.set({ settings: settings }, () => {\n\n          if (settings) {\n            resolve(settings.consent);\n          } else {\n            reject(new Error('Writing enabled settings to local storage'));\n          }\n\n        });\n\n      });\n\n    });\n\n  }\n\n  static setConsent(mode = 'toggle') {\n\n    return new Promise((resolve, reject) => {\n\n      chrome.storage.local.get(['settings'], (storage) => {\n\n        const settings = storage.settings;\n\n        //console.log(settings)\n\n        settings.consent = mode === 'toggle' ? !settings.consent : mode;\n\n        //console.log(settings)\n\n        chrome.storage.local.set({ settings: settings }, () => {\n\n          if (settings) {\n            resolve(settings.consent);\n          } else {\n            reject(new Error('Writing consent settings to local storage'));\n          }\n\n        });\n\n      });\n\n    });\n\n  }\n\n  static setToolbar(mode = 'toggle') {\n\n    return new Promise((resolve, reject) => {\n\n      chrome.storage.local.get(['settings'], (storage) => {\n\n        const settings = storage.settings;\n\n        //console.log(settings)\n\n        settings.toolbar = mode === 'toggle' ? !settings.toolbar : mode;\n\n        //console.log(settings)\n\n        chrome.storage.local.set({ settings: settings }, () => {\n\n          if (settings) {\n            resolve(settings.toolbar);\n          } else {\n            reject(new Error('Writing toolbar settings to local storage'));\n          }\n\n        });\n\n      });\n\n    });\n\n  }\n\n  static getHostSettings(currentHost = window.location.hostname) {\n\n    return new Promise((resolve, reject) => {\n\n      let settings;\n\n      chrome.storage.local.get(['hosts'], (storage) => {\n\n        console.log(storage.hosts)\n\n        // If there aren't any entries, start with this one\n        if (!storage.hosts) {\n          settings = {\n            enabled: null,\n            name: currentHost,\n          };\n    \n          chrome.storage.local.set({ hosts: [settings] }, () => {\n            resolve(settings);\n          });\n        }\n\n        // Look up this host\n        settings = storage.hosts.find(hostInStorage => hostInStorage.name === currentHost);\n\n        if (settings) {\n          resolve(settings);\n        } else {\n\n          // No settings for this host yet, make an empty entry\n          settings = {\n            enabled: null,\n            name: currentHost,\n          };\n\n          storage.hosts.push(settings);\n          \n          chrome.storage.local.set({ hosts: storage.hosts }, () => {\n            resolve(settings);\n          });\n\n        }\n\n        reject(new Error('Reading host settings from local storage'));\n      \n      });\n\n    });\n\n  }\n\n  static setHost(mode = 'toggle') {\n\n    const currentHost = window.location.hostname;\n\n    return new Promise((resolve, reject) => {\n\n      chrome.storage.local.get(['hosts'], (storage) => {\n\n        if (storage.hosts) {\n\n          const settings = storage.hosts.find(hostInStorage => hostInStorage.name === currentHost);\n\n          const index =  storage.hosts.indexOf(settings);\n\n          storage.hosts[index].enabled = mode === 'toggle' ? !storage.hosts[index].enabled : mode; \n\n          chrome.storage.local.set({ hosts: storage.hosts }, () => {\n\n            if (settings) resolve(storage.hosts[index]);\n\n          });\n\n        }\n      \n      });\n\n    });\n  }\n\n  static getHosts() {\n\n    return new Promise((resolve, reject) => {\n\n      chrome.storage.local.get(['hosts'], (storage) => {\n\n        if (storage.hosts) resolve(storage.hosts);\n\n        reject(new Error('Reading host settings from local storage'));\n      \n      });\n\n    });\n\n  }\n\n  static resetAllHosts() {\n\n    return new Promise((resolve, reject) => {\n\n      chrome.storage.local.set({ hosts: [] }, () => {\n\n        resolve(true);\n\n      });\n\n      reject(new Error('No resetting hosts'));\n\n    });\n\n  }\n\n}\n","import * as manifest from '../../manifest.json';\n\nimport config from '../../config';\n\nimport StorageController from '../controller/storage';\n\nconst captionSettings = document.getElementById('caption-settings');\nconst displaySettings = document.getElementById('string-settings');\n\ncaptionSettings.style.display = config.options.settingsString ? 'flex' : 'none';\ndisplaySettings.style.display = config.options.settingsString ? 'flex' : 'none';\n\nconst captionEnabled = document.getElementById('caption-enabled');\nconst statusEnabled = document.getElementById('status-enabled');\nconst buttonEnabled = document.getElementById('button-enabled');\n\nstatusEnabled.style.display = config.options.enabled ? 'flex' : 'none';\nbuttonEnabled.style.display = config.options.enabled ? 'flex' : 'none';\ncaptionEnabled.style.display = config.options.enabled ? 'flex' : 'none';\n\nconst captionConsent = document.getElementById('caption-consent');\nconst statusConsent = document.getElementById('status-consent');\nconst buttonConsent = document.getElementById('button-consent');\n\nstatusConsent.style.display = config.options.consent ? 'flex' : 'none';\nbuttonConsent.style.display = config.options.consent ? 'flex' : 'none';\ncaptionConsent.style.display = config.options.consent ? 'flex' : 'none';\n\nconst captionHost = document.getElementById('caption-host');\nconst stringHost = document.getElementById('string-host');\nconst displayHost = document.getElementById('active-status');\nconst buttonHostEnable = document.getElementById('active-button-enable');\nconst buttonHostDisable = document.getElementById('active-button-disable');\n\ncaptionHost.style.display = config.options.host ? 'flex' : 'none';\nstringHost.style.display = config.options.hostString ? 'flex' : 'none';\ndisplayHost.style.display = config.options.host ? 'flex' : 'none';\nbuttonHostEnable.style.display = config.options.host ? 'flex' : 'none';\nbuttonHostDisable.style.display = config.options.host ? 'flex' : 'none';\n\nconst captionToolbar = document.getElementById('caption-toolbar');\nconst statusToolbar = document.getElementById('status-toolbar');\nconst buttonToolbar = document.getElementById('button-toolbar');\n\ncaptionToolbar.style.display = config.options.toolbar ? 'flex' : 'none';\nstatusToolbar.style.display = config.options.toolbar ? 'flex' : 'none';\nbuttonToolbar.style.display = config.options.toolbar ? 'flex' : 'none';\n\nconst captionDev = document.getElementById('caption-dev');\nconst statusHosts = document.getElementById('status-hosts');\nconst buttonResetHosts = document.getElementById('button-reset-hosts');\n\ncaptionDev.style.display = config.options.dev ? 'flex' : 'none';\nstatusHosts.style.display = config.options.dev ? 'flex' : 'none';\nbuttonResetHosts.style.display = config.options.dev ? 'flex' : 'none';\n\nconst captionVersion = document.getElementById('caption-version');\nconst displayVersion = document.getElementById('display-version');\n\ncaptionVersion.style.display = config.options.dev ? 'flex' : 'none';\ndisplayVersion.style.display = config.options.dev ? 'flex' : 'none';\n\n/**\n * Settings\n */\nconst getSettings = () => {\n  StorageController.getSettings()\n    .then((settings) => {\n      displaySettings.value = JSON.stringify(settings);\n\n      statusEnabled.textContent = settings.enabled;\n      buttonEnabled.textContent = settings.enabled ? 'disable' : 'enable';\n\n      statusToolbar.textContent = settings.toolbar;\n      buttonToolbar.textContent = settings.toolbar ? 'hide' : 'show';\n\n      statusConsent.textContent = settings.consent;\n      buttonConsent.textContent = settings.consent ? 'take' : 'give';\n    })\n    .catch((error) => {\n      displaySettings.value = (error);\n    });\n};\n\nconst getCurrentHostSettings = () => {\n\n  chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n\n    const currentHostname = new URL(tabs[0].url).hostname;\n\n    StorageController.getHostSettings(currentHostname)\n      .then((settings) => {\n        stringHost.value = JSON.stringify(settings);\n\n        displayHost.textContent = settings.enabled === null ? 'not set' : settings.enabled;\n\n        buttonHostEnable.textContent = 'enable';\n        buttonHostDisable.textContent = 'disable';\n\n      })\n      .catch((error) => {\n        display.value = (error);\n      });\n\n  });\n\n};\n\nconst getAllHosts = () => {\n  StorageController.getHosts()\n    .then((hosts) => {\n      statusHosts.textContent = 'hosts: '+hosts.length;\n    });\n}\n\ngetSettings();\ngetCurrentHostSettings();\ngetAllHosts();\n\n/**\n * Enabled\n */\nbuttonEnabled.addEventListener('click', () => {\n\n  chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n\n    chrome.tabs.sendMessage(tabs[0].id, { command: 'enabled' });\n\n  });\n\n});\n\nchrome.runtime.onMessage.addListener((settings) => {\n  if (settings.enabled === undefined) return;\n  StorageController.getSettings()\n    .then((_settings) => {\n      displaySettings.value = JSON.stringify(_settings);\n      statusEnabled.textContent = _settings.enabled;\n      buttonEnabled.textContent = _settings.enabled ? 'disable' : 'enable';\n    })\n    .catch((error) => {\n      displaySettings.value = (error);\n    });\n});\n\n/**\n * Consent\n */\nbuttonConsent.addEventListener('click', () => {\n\n  chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n\n    chrome.tabs.sendMessage(tabs[0].id, { command: 'consent' });\n\n  });\n\n});\n\nchrome.runtime.onMessage.addListener((settings) => {\n  if (settings.consent === undefined) return;\n  StorageController.getSettings()\n    .then((_settings) => {\n      displaySettings.value = JSON.stringify(_settings);\n      statusConsent.textContent = _settings.consent;\n      buttonConsent.textContent = _settings.consent ? 'take' : 'give';\n    })\n    .catch((error) => {\n      displaySettings.value = (error);\n    });\n});\n\n/**\n * Toolbar\n */\nbuttonToolbar.addEventListener('click', () => {\n\n  chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n\n    chrome.tabs.sendMessage(tabs[0].id, { command: 'toolbar' });\n\n  });\n\n});\n\nchrome.runtime.onMessage.addListener((settings) => {\n  if (settings.toolbar === undefined) return;\n  StorageController.getSettings()\n    .then((_settings) => {\n      displaySettings.value = JSON.stringify(_settings);\n      statusToolbar.textContent = _settings.toolbar;\n      buttonToolbar.textContent = _settings.toolbar ? 'hide' : 'show';\n    })\n    .catch((error) => {\n      displaySettings.value = (error);\n    });\n});\n\n/**\n * Hosts\n */\nbuttonHostEnable.addEventListener('click', () => {\n  chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n    chrome.tabs.sendMessage(tabs[0].id, { command: 'host-enable' });\n  });\n});\nbuttonHostDisable.addEventListener('click', () => {\n  chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n    chrome.tabs.sendMessage(tabs[0].id, { command: 'host-disable' });\n  });\n});\n\nchrome.runtime.onMessage.addListener((settings) => {\n  if (settings.host === undefined) return;\n  displayHost.textContent = settings.host.enabled;\n  stringHost.value = JSON.stringify(settings.host);\n});\n\n/**\n * Reset hosts\n */\nbuttonResetHosts.addEventListener('click', () => {\n  StorageController.resetAllHosts();\n  getCurrentHostSettings();\n  getAllHosts();\n});\n\n/**\n * Version\n */\ndisplayVersion.textContent = manifest.version;\n"]}